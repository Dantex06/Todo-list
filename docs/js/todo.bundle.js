document.addEventListener("DOMContentLoaded",(()=>{const e={},t=document.querySelector(".todo-block_input"),c=document.querySelector(".todo-block_list");function o(t=location.hash.slice(1)){for(console.log(t,location.hash);c.firstChild;)c.removeChild(c.firstChild);Object.entries(e).forEach((s=>{s[1].status!==t&&""!==t||c.append(function(t,c,s){const l=document.createElement("div");l.classList.add("todo-block_list_item");const i=document.createElement("label");i.className="checkbox",n();const d=document.createElement("input");d.type="checkbox",d.name="license",d.className="checkbox_input",d.checked="completed"===c,function(t,c){console.log(e),c.addEventListener("click",(e=>{!0===c.checked?a(t,"completed"):!1===c.checked&&a(t,"active"),o(location.hash.slice(1))}))}(s,d);const r=document.createElement("span");r.className="checkbox_mark",i.appendChild(d),i.appendChild(r);const m=document.createElement("p");return m.textContent=t,m.setAttribute("data-id",t),l.appendChild(i),l.appendChild(m),l}(s[1].name,s[1].status,s[0]))})),n()}function n(){const t=document.querySelector(".todo-block_task-bar_count"),c=document.querySelector(".todo-block_task-bar_clear-button");var n;0===Object.values(e).length?(t.innerHTML="",c.innerHTML=""):(t.textContent=`${Object.values(e).filter((e=>"active"===e.status)).length} Осталось`,n=c,Object.values(e).some((e=>"completed"===e.status))?n.textContent="Очистить завершенные":n.innerHTML="",n.onclick=()=>{Object.keys(e).filter((t=>"completed"===e[t].status)).forEach((e=>{a(e,"remove")})),o(location.hash.slice(1))}),function(){const t=document.querySelector(".todo-block_task-bar_list_items");if(console.log(t.childNodes,Object.keys(e),Object.values(e),666),0!==Object.values(e).length){if(0===t.children.length){const e=document.createElement("a"),c=document.createElement("a"),o=document.createElement("a");e.className="todo-block_task-bar_list_items_item",c.className="todo-block_task-bar_list_items_item",o.className="todo-block_task-bar_list_items_item",e.href="#",c.href="#active",o.href="#completed",e.textContent="Все",c.textContent="Активные",o.textContent="Выполненные",t.appendChild(e),t.appendChild(c),t.appendChild(o)}}else for(;t.firstChild;)t.removeChild(t.firstChild)}()}function a(t,c){switch(c){case"new":{const c=Date.now().toString();e[c]={name:t,status:"active"};break}case"active":case"completed":e[t]&&(e[t].status=c);break;case"remove":e[t]&&delete e[t]}}t.addEventListener("keydown",(e=>{"Enter"===e.key&&(a(e.target.value,"new"),e.target.value="",o())})),window.onhashchange=function(){o(location.hash.slice(1))}}));